# UV手电筒PCB设计原理图

## 1. 整体原理图设计

### 1.1 电源管理部分
- 输入：Type-C接口 (5V)
- 充电管理：TP4056
- 电池保护：DW01-P + FS8205A
- 输出：3.7V锂电池供电

### 1.2 LED驱动部分
- 驱动IC：PT4115
- 输入电压：3.7V
- 输出电流：700mA（可调）
- 关键元件：
  * 输入电容：10μF/16V
  * 输出电感：22μH/2A
  * 肖特基二极管：SS34
  * 采样电阻：0.2Ω/1%

### 1.3 MCU控制部分
- 主控：STM32F030F4P6
- 工作电压：3.3V
- 外围元件：
  * 晶振：8MHz
  * 去耦电容：0.1μF
  * 按键上拉：10KΩ

## 2. 详细原理图

### 2.1 电源及充电电路 
[Type-C] [TP4056] [DW01-P] [FS8205A]
VCC -------|VIN VBAT|-----|VDD VM|-------|S1
GND -------|GND GND |-----|VSS VDD|------|S2
CC1 -------|PROG | |CS VSS|------|G1
CC2 -------|CHRG | |OC |G2
|STDBY | |OD |
|BAT | |TD |

### 2.2 LED驱动电路
[Battery]        [PT4115]         [LED]
   VIN ---|C1|---|VIN   SW|---|L1|--->(LED+)
          |   |   |         |   |
   GND ---|   |---|GND     |---|D1|-->(LED-)
                  |CS      |
                  |         |
              |R1|         |
                  |         |

### 2.3 MCU控制电路
[STM32F030F4P6]
                VDD(3.3V)
                   |
        C3(0.1uF)  R3(10K)
             |        |
      +------|--------|-------+
      |      |     NRST      |
      |    VDDA         PA0  |---> LED_PWM
      |                 PA1  |---> KEY_IN
      |   STM32F030F4P6      |
      |                 PA2  |---> TEMP_ADC
      |                 PA3  |---> VBAT_ADC
      |      OSC            |
      +------|--------|-----+
            |        |
        X1(8MHz)   C4,C5(20pF)

## 3. 元器件清单（BOM）

### 3.1 主要芯片
1. MCU: STM32F030F4P6 (TSSOP20)
2. LED驱动: PT4115 (SOT23-6)
3. 充电管理: TP4056 (SOP-8)
4. 保护IC: DW01-P (SOT23-6)
5. 双MOS: FS8205A (SOT23-6)

### 3.2 无源器件
1. 电感: 22μH/2A (SMD 4020)
2. 电容:
   - 10μF/16V (0805) x 2
   - 0.1μF/16V (0603) x 4
   - 20pF/16V (0603) x 2

3. 电阻:
   - 0.2Ω/1% (2512) x 1
   - 10KΩ/5% (0603) x 4
   - 1.2KΩ/5% (0603) x 2

4. 二极管:
   - SS34 (SMB)
   - LED指示灯 (0603) x 2

5. 其他:
   - Type-C座 (16P)
   - 晶振 (8MHz/SMD)
   - 轻触开关 (3×4×2.5mm)

## 4. PCB布局建议

### 4.1 关键器件布局
1. 功率部分
   - PT4115靠近LED接口
   - 电感和二极管靠近PT4115
   - 采样电阻靠近GND

2. 充电部分
   - Type-C接口靠边缘
   - TP4056靠近Type-C
   - DW01-P和FS8205A靠近电池接口

3. 控制部分
   - MCU放置在中心位置
   - 晶振靠近MCU
   - 按键靠近边缘

### 4.2 布线建议
1. 电源线
   - 主电源线：1.5mm
   - LED电流线：1.2mm
   - 充电电流线：0.8mm
   - 信号线：0.25mm

2. 地平面
   - 数字地和模拟地分离
   - 单点连接
   - 大面积铺铜

3. 散热考虑
   - LED驱动区域多打过孔
   - 充电IC下方铺铜
   - 预留散热孔
